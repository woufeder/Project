# 文章後台管理系統 — 檔案功能與結構說明

## 主要功能頁面

### 文章管理相關
- **index.php**
  - 文章管理首頁
  - 功能：
    - 分頁顯示（每頁 10 筆）
    - 分類篩選功能
    - 關鍵字搜尋（標題和內容）
    - 文章狀態顯示
    - 封面圖片預覽
  - 操作按鈕：
    - 編輯（btn-update）
    - 刪除（btn-del，軟刪除）

- **article.php**
  - 單篇文章詳細內容頁面
  - 功能：
    - 顯示文章完整內容
    - 顯示文章相關資訊（標題、分類、時間）
    - 大圖顯示封面照片
    - 支援返回列表功能

- **add.php**
  - 新增文章表單頁面
  - 功能：
    - 文章標題輸入
    - 分類選擇
    - 封面圖片上傳
    - 內容編輯器（支援格式化工具）
  - 表單處理：doAdd.php

- **edit.php**
  - 編輯文章表單頁面
  - 功能：
    - 預載現有文章資料
    - 分類選擇
    - 封面圖片更新
    - 內容編輯器
  - 表單處理：doEdit.php

### 回收桶相關
- **delete_list.php**
  - 已刪除/下架文章列表頁面
  - 功能：
    - 顯示所有已軟刪除的文章
    - 文章還原功能
    - 文章永久刪除功能
  - 操作按鈕：
    - 還原（btn-update）
    - 永久刪除（btn-del）

### 分類管理
- **categories.php**
  - 文章分類管理頁面
  - 功能：
    - 顯示所有分類
    - 新增分類
    - 編輯分類名稱
    - 刪除分類

## 後端處理檔案

### 文章操作處理
- **doAdd.php**
  - 處理新增文章
  - 功能：
    - 驗證表單資料
    - 處理封面圖片上傳
    - 新增文章記錄
    - 返回首頁

- **doEdit.php**
  - 處理編輯文章
  - 功能：
    - 驗證表單資料
    - 處理封面圖片更新
    - 更新文章記錄
    - 自動刪除舊封面圖片

- **delete.php**
  - 處理文章軟刪除
  - 功能：
    - 將文章標記為已刪除（is_deleted = 1）
    - 移至回收桶

- **permanent_delete.php**
  - 處理文章永久刪除
  - 功能：
    - 刪除文章資料庫記錄
    - 刪除關聯的封面圖片
    - 完全清除文章資料

- **undo_delete.php**
  - 處理回收桶文章還原
  - 功能：
    - 將文章標記為未刪除（is_deleted = 0）
    - 返回文章列表

- **doUpdo.php**
  - 處理文章上下架狀態切換
  - 功能：
    - 切換 is_deleted 狀態（0/1）
    - 更新文章狀態

## 資料夾結構
```articles/
├── index.php           # 文章列表主頁
├── article.php         # 文章詳細內容
├── add.php            # 新增文章表單
├── edit.php           # 編輯文章表單
├── delete_list.php    # 回收桶列表
├── categories.php     # 分類管理
├── doAdd.php         # 新增處理
├── doEdit.php        # 編輯處理
├── delete.php        # 軟刪除處理
├── permanent_delete.php # 永久刪除處理
├── undo_delete.php    # 還原處理
└── doUpdo.php        # 上下架處理
```

## 注意事項
1. 所有文章相關的圖片都存放在 `../uploads/` 目錄下
2. 封面圖片使用 uniqid() 產生唯一檔名
3. 文章刪除採用軟刪除機制，可透過回收桶還原
4. 永久刪除會同時刪除資料庫記錄和實體圖片檔案
5. 分類刪除前會檢查是否有關聯的文章

---
